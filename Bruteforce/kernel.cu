#include "device_launch_parameters.h"

#include <stdio.h>
#include <cuda_runtime.h>

#define n 4294967296

unsigned char array1[] = {
        0x21, 0x46, 0x93, 0xA8, 0x02, 0x48, 0xB3, 0x49,
        0x9E, 0xA7, 0xD3, 0x9E, 0xA7, 0xD3, 0x8E, 0xA3,
        0x1D, 0xA3, 0x7D, 0xAF, 0xD6, 0xB5, 0xE5, 0xBC,
        0xDB, 0xDE, 0xF7, 0x5B, 0xDA, 0x6F, 0xB7, 0x8C,
        0x17, 0x7B, 0xD8, 0x5F, 0x31, 0xA6, 0xA5
};

unsigned char array2[] = {
    0x21, 0x46, 0x58, 0x57, 0xFE, 0xBB, 0x02, 0x56,
    0x14, 0x41, 0x82, 0x0A, 0x28, 0x28, 0x2A, 0xA8,
    0xA8, 0xA8, 0xA4, 0x4A, 0x21, 0x42, 0x63, 0x1B,
    0xD0, 0xD0, 0xD1, 0x21, 0x42, 0x0D, 0xA1, 0x3D,
    0x57, 0x91, 0xE2, 0x37, 0x9D, 0x76, 0xB5
};

__global__ void dummyKernel(int maxVal) {
    int index = threadIdx.x + blockIdx.x * blockDim.x;
    if (index < 4294967295) {
        index + index + 1;
    }
}

int main() {

    // Rozpoczęcie pomiaru czasu
    float time;
    cudaEvent_t start, stop;
    cudaEventCreate(&start);
    cudaEventCreate(&stop);
    cudaEventRecord(start, 0);


    //Alokacja pamięci na urządzeniu
    size_t size = 39 * sizeof(int);
    int* d_array1;
    cudaMalloc(&d_array1, size);
    int* d_array2;
    cudaMalloc(&d_array2, size);

    //Kopiowanie zmiennych do GPU
    cudaMemcpy(d_array1, array1, size, cudaMemcpyHostToDevice);
    cudaMemcpy(d_array2, array2, size, cudaMemcpyHostToDevice);

    // Uruchomienie kernela
    int threadsPerBlock = 256;
    int blocksPerGrid = (n + threadsPerBlock - 1) / threadsPerBlock;
    dummyKernel << <blocksPerGrid, threadsPerBlock >> > (n);

    // Zakończenie pomiaru czasu
    cudaEventRecord(stop, 0);
    cudaEventSynchronize(stop);
    cudaEventElapsedTime(&time, start, stop);
    cudaEventDestroy(start);
    cudaEventDestroy(stop);

    printf("Czas trwania: %f ms\n", time);

    return 0;
}




/*int main() {
    unsigned char array1[] = {
        0x21, 0x46, 0x93, 0xA8, 0x02, 0x48, 0xB3, 0x49,
        0x9E, 0xA7, 0xD3, 0x9E, 0xA7, 0xD3, 0x8E, 0xA3,
        0x1D, 0xA3, 0x7D, 0xAF, 0xD6, 0xB5, 0xE5, 0xBC,
        0xDB, 0xDE, 0xF7, 0x5B, 0xDA, 0x6F, 0xB7, 0x8C,
        0x17, 0x7B, 0xD8, 0x5F, 0x31, 0xA6, 0xA5
    };

    unsigned char array2[] = {
        0x21, 0x46, 0x58, 0x57, 0xFE, 0xBB, 0x02, 0x56,
        0x14, 0x41, 0x82, 0x0A, 0x28, 0x28, 0x2A, 0xA8,
        0xA8, 0xA8, 0xA4, 0x4A, 0x21, 0x42, 0x63, 0x1B,
        0xD0, 0xD0, 0xD1, 0x21, 0x42, 0x0D, 0xA1, 0x3D,
        0x57, 0x91, 0xE2, 0x37, 0x9D, 0x76, 0xB5
    };
}*/
